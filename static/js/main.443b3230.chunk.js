(this.webpackJsonpiframe=this.webpackJsonpiframe||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),r=n(6),c=n.n(r),s=(n(13),n(14),n(2)),a=n(8),l=n(7),u=n(0),d=function(t){var e=t.name,n=t.src,o=t.focused,r=(t.focusedName,t.setFocused),c=t.removeApp,d=Math.min(840,window.innerWidth-32),h=Math.min(Math.floor(d/1.33333),window.innerHeight-24),p=window.innerWidth/2-d/2,f=window.innerHeight/2-h/2,b=function(){var t=[];return document.querySelectorAll(".application").forEach((function(n){var i=n.getAttribute("data-name");if(i!==e){var o=n.getBoundingClientRect();t.push({x:o.x,y:o.y,width:o.width,height:o.height,zIndex:n.style.zIndex,name:null!==i&&void 0!==i?i:""})}})),t},j=function(t,e){var n=b().map((function(t){return[t.x,t.y]})),i=t,o=e;return function t(){var e,r=!1,c=Object(l.a)(n);try{for(c.s();!(e=c.n()).done;){var s=e.value;s[0]===i&&s[1]===o&&(i+=16,o+=16,r=!0)}}catch(a){c.e(a)}finally{c.f()}return console.log(i,o),r?t():[i,o]}()}(p,f),v=Object(s.a)(j,2),w=v[0],g=v[1],x=Object(i.useState)(w),O=Object(s.a)(x,2),m=O[0],y=O[1],P=Object(i.useState)(g),k=Object(s.a)(P,2),S=k[0],C=k[1],M=Object(i.useState)(d),N=Object(s.a)(M,2),H=N[0],D=N[1],I=Object(i.useState)(h),z=Object(s.a)(I,2),W=z[0],A=z[1],E=Object(i.useState)(1),R=Object(s.a)(E,2),T=R[0],F=R[1],B=Object(i.useState)(!1),L=Object(s.a)(B,2),X=L[0],U=L[1],Y=Object(i.useState)(!1),q=Object(s.a)(Y,2),J=q[0],_=q[1],G=Object(i.useRef)(null),K=Object(i.useRef)(null),Q=Object(i.useRef)([m,S]),V=Object(i.useRef)([H,W]),Z=Object(i.useRef)([m,S]),$=Object(i.useRef)([H,W]);Object(i.useEffect)((function(){rt()}),[]);var tt=32,et=function(){var t=Object(i.useRef)([0,0]),e=Object(i.useRef)(!1);return{dragPointerDown:function(n){var i;n.preventDefault(),e.current=!0,t.current=[n.clientX,n.clientY],null===(i=n.target)||void 0===i||i.setPointerCapture(n.pointerId)},dragPointerMove:function(n){if(e.current){var i=t.current,o={x:Math.max(0,Math.min(n.clientX,window.innerWidth)),y:Math.max(0,Math.min(n.clientY,window.innerHeight))};return[o.x-i[0],o.y-i[1]]}return[0,0]},dragPointerUp:function(t){var n;t.preventDefault(),e.current=!1,null===(n=t.target)||void 0===n||n.releasePointerCapture(t.pointerId)}}}(),nt=et.dragPointerDown,it=et.dragPointerMove,ot=et.dragPointerUp,rt=function(){var t=0;document.querySelectorAll(".application").forEach((function(e){t=Math.max(t,parseInt(e.style.zIndex))})),F(t+1)},ct=function(t){if(t.stopPropagation(),!o){var n=b().filter((function(t){return t.x<m+H&&t.x+t.width>m&&t.y<S+W&&t.y+t.height>S})).map((function(t){return t.zIndex}));Math.max.apply(Math,Object(a.a)(n))<T&&(r(e),rt(),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0))}};return Object(i.useEffect)((function(){var t=function(){var t=48;m>window.innerWidth-t&&(console.log("left"),y(window.innerWidth-t)),S>window.innerHeight-t&&C(window.innerHeight-t),m+H<t&&y(t-H),S+W<t&&y(t-W)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[S,m,H,W,C,y,D,A]),Object(u.jsxs)("div",{ref:K,className:"application","data-name":e,style:{position:"absolute",top:X?0:S,left:X?0:m,width:X?"100%":"auto",height:X?"100%":"auto",outline:o?"solid 2px #111":"solid 2px #999",background:"white",zIndex:T},onPointerDown:function(t){t.stopPropagation(),r(e),rt(),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0)},children:[Object(u.jsxs)("div",{style:{position:"relative",height:tt,background:o?"#222":"#999",color:"white",lineHeight:"32px",paddingLeft:"1ch",cursor:"move",display:"flex",justifyContent:"space-between",zIndex:3},onPointerDown:function(t){t.stopPropagation(),Q.current=[m,S],r(e),nt(t),rt(),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0)},onPointerMove:function(t){t.stopPropagation();var e=it(t);if(0!==e[0]||0!==e[1]){var n=Q.current[0]+e[0],i=Q.current[1]+e[1];y(n),C(i),Z.current=[n,i]}},onPointerUp:function(t){t.stopPropagation(),ot(t)},onPointerOver:ct,children:[Object(u.jsx)("div",{children:e}),Object(u.jsxs)("div",{style:{display:"flex",textAlign:"center"},children:[Object(u.jsx)("div",{role:"button",className:"hover",title:"refresh",style:{width:32,cursor:"pointer"},onPointerDown:function(t){t.stopPropagation(),G.current&&(G.current.src=n,setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0))},children:"r"}),Object(u.jsx)("div",{className:"show-hover-parent",style:{position:"relative"},children:Object(u.jsxs)("div",{className:"show-hover-parent ".concat(J?"show-hover":""),style:{position:"relative"},children:[Object(u.jsx)("div",{role:"button",className:"hover",style:{width:32,cursor:"pointer"},title:"Split",onPointerDown:function(t){_(!J)},children:J?"\u25c6":"\u25c7"}),Object(u.jsxs)("div",{className:"show-hover-child",style:{position:"absolute",top:32,left:-32,background:o?"#444":"#999"},children:[Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("div",{role:"button",className:"hover",style:{width:48,cursor:"pointer"},onClick:function(t){t.stopPropagation(),U(!1),y(0),C(tt),D(window.innerWidth/2),A(window.innerHeight-tt),_(!1)},children:"\u25c1"}),Object(u.jsx)("div",{role:"button",className:"hover",style:{width:48,cursor:"pointer"},onClick:function(t){t.stopPropagation(),U(!1),y(window.innerWidth/2),C(tt),D(window.innerWidth/2),A(window.innerHeight-tt),_(!1)},children:"\u25b7"})]}),Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("div",{role:"button",className:"hover",style:{width:48,cursor:"pointer"},onClick:function(t){t.stopPropagation(),U(!1),y(0),C(tt),D(window.innerWidth),A((window.innerHeight-tt)/2),_(!1)},children:"\u25b3"}),Object(u.jsx)("div",{role:"button",className:"hover",style:{width:48,cursor:"pointer"},onClick:function(t){t.stopPropagation(),U(!1),y(0),C((window.innerHeight-tt)/2+tt),D(window.innerWidth),A((window.innerHeight-tt)/2),_(!1)},children:"\u25bd"})]}),Object(u.jsx)("div",{role:"button",className:"hover",style:{width:96,cursor:"pointer"},onClick:function(t){t.stopPropagation(),U(!1);var e=Math.min(840,window.innerWidth-32),n=Math.min(Math.floor(e/1.33333),window.innerHeight-24),i=window.innerWidth/2-e/2,o=window.innerHeight/2-n/2;y(i),C(o),D(e),A(n)},children:"\u25a1"})]})]})}),Object(u.jsx)("div",{role:"button",className:"hover",style:{width:32,cursor:"pointer"},title:"Maximize",onPointerDown:function(t){t.stopPropagation(),X?(U(!1),r(e),rt(),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0)):(U(!0),r(e),rt(),setTimeout((function(){var t;null===(t=G.current)||void 0===t||t.focus()}),0))},children:X?"\u25a0":"\u25a1"}),Object(u.jsx)("div",{role:"button",className:"hover",title:"close",style:{width:32,cursor:"pointer"},onPointerDown:function(t){t.stopPropagation(),c(n)},children:"X"})]})]}),Object(u.jsx)("iframe",{title:e,ref:G,style:{display:"block",border:"none"},src:n,width:X?"100%":H,height:X?window.innerHeight-tt:W-tt}),o?null:Object(u.jsx)("div",{style:{position:"absolute",top:tt,left:0,width:H,height:W-tt,cursor:"pointer",zIndex:2},onPointerOver:ct}),Object(u.jsx)("div",{style:{position:"absolute",bottom:-32,right:-32,width:36,height:36,cursor:"nw-resize"},onPointerDown:function(t){t.stopPropagation(),V.current=[H,W],$.current=[H,W],nt(t)},onPointerMove:function(t){t.stopPropagation();var e=it(t);0===e[0]&&0===e[1]||(D(V.current[0]+e[0]),A(V.current[1]+e[1]),$.current=[H,W])},onPointerUp:function(t){t.stopPropagation(),ot(t)}})]})},h=function(){var t=Object(i.useState)([]),e=Object(s.a)(t,2),n=e[0],o=e[1],r=Object(i.useState)(new Set),c=Object(s.a)(r,2),a=c[0],l=c[1],h=Object(i.useState)(null),p=Object(s.a)(h,2),f=p[0],b=p[1],j=Object(i.useState)(!1),v=Object(s.a)(j,2),w=v[0],g=v[1],x=Object(i.useState)(!1),O=Object(s.a)(x,2),m=O[0],y=O[1],P=Object(i.useCallback)((function(t){l((function(e){return new Set(e).add(t)}))}),[l]);Object(i.useEffect)((function(){fetch("https://constraint.systems/tools.json").then((function(t){return t.json()})).then((function(t){t.tools.filter((function(t){return"https://csos.constraint.systems"!==t.url})),o(t.tools);for(var e=t.tools.slice(0,1).reverse(),n=function(t){var n=e[t];setTimeout((function(){P(n.url),t===e.length-1&&b(n.title)}),400*t+400)},i=0;i<e.length;i++)n(i)}))}),[]);var k=function(t){l((function(e){var n=new Set(e);return n.delete(t),n}))};return Object(u.jsxs)("div",{onPointerDown:function(t){t.preventDefault(),b(null)},style:{height:"100vh"},children:[Object(u.jsxs)("div",{style:{position:"relative",color:"#fff",background:"#222",padding:"0 1ch",height:32,lineHeight:"32px",display:"flex",justifyContent:"space-between"},children:[Object(u.jsx)("div",{className:"hover",style:{cursor:"pointer",height:32,padding:"0 1ch",position:"absolute",left:0,top:0},onClick:function(t){t.stopPropagation(),g(!w)},children:"Apps"}),Object(u.jsx)("div",{className:"hover",style:{position:"absolute",cursor:"pointer",right:0,top:0,padding:"0 1ch"},onClick:function(t){t.stopPropagation(),y(!m)},children:"About"})]}),Object(u.jsx)("div",{children:n.length>0?Array.from(a).map((function(t){var e=n.find((function(e){return e.url===t}));return Object(u.jsx)(d,{name:e.title,src:t,focused:e.title===f,focusedName:f,setFocused:b,removeApp:k},t)})):null}),w?Object(u.jsxs)("div",{style:{position:"absolute",zIndex:9999,pointerEvents:"auto",maxWidth:352,left:16,top:48,outline:"solid 2px black",height:"calc(100% - 64px)",width:"100%"},onPointerDown:function(t){return t.stopPropagation()},children:[Object(u.jsxs)("div",{style:{background:"#222",color:"#eee",height:32,lineHeight:"32px",padding:"0 1ch",justifyContent:"space-between",position:"absolute",left:0,top:0,width:"100%",zIndex:9},children:[Object(u.jsx)("div",{children:"Apps"}),Object(u.jsx)("div",{className:"hover",style:{position:"absolute",right:0,top:0,width:32,textAlign:"center",cursor:"pointer"},onClick:function(){return g(!1)},children:"X"})]}),Object(u.jsx)("div",{style:{position:"absolute",left:0,top:32,width:"100%",height:"calc(100% - 32px)",overflowY:"auto"},children:n.map((function(t,e){return Object(u.jsxs)("div",{style:{padding:"16px 16px",display:w?"block":"none",maxWidth:380,width:"100%",cursor:"pointer",pointerEvents:"auto",borderBottom:e===n.length-1?"none":"solid 1px black",background:a.has(t.url)?"rgba(210,210,210,0.9)":"rgba(255,255,255,0.9)"},onClick:function(){var e=new Set(a);e.add(t.url),l(e),b(t.title)},children:[Object(u.jsx)("div",{children:t.title}),Object(u.jsx)("div",{style:{color:"#666"},children:t.description})]},t.title)}))})]}):null,m?Object(u.jsxs)("div",{style:{position:"absolute",zIndex:9999,pointerEvents:"auto",maxWidth:352,right:16,top:48,outline:"solid 2px black",width:"100%"},onPointerDown:function(t){return t.stopPropagation()},children:[Object(u.jsxs)("div",{style:{background:"#222",color:"#eee",height:32,lineHeight:"32px",padding:"0 1ch",justifyContent:"space-between",width:"100%",zIndex:9},children:[Object(u.jsx)("div",{children:"About"}),Object(u.jsx)("div",{className:"hover",style:{position:"absolute",right:0,top:0,width:32,textAlign:"center",cursor:"pointer"},onClick:function(){return y(!1)},children:"X"})]}),Object(u.jsxs)("div",{style:{width:"100%",background:"white",padding:"16px"},children:[Object(u.jsx)("p",{children:"Constraint Systems is a collection of experimental creative tools for manipulating images and text."}),Object(u.jsx)("p",{children:"csOS uses iframes to let you open multiple tools at once. By downloading and uploading files between them you can make your own creative pipeline."}),Object(u.jsx)("p",{children:Object(u.jsx)("a",{href:"https://constraint.systems",target:"_blank",rel:"noreferrer",children:"Constraint Systems"})})]})]}):null]})},p=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),i(t),o(t),r(t),c(t)}))};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(h,{})}),document.getElementById("root")),p()}},[[16,1,2]]]);
//# sourceMappingURL=main.443b3230.chunk.js.map